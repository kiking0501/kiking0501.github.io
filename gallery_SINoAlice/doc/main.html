<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>[ kiking] Gallery of SINoAlice </title>

        <!-- Bootstrap 3-->
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="main.css">
        <style type="text/css" media="screen">


        </style>
        <script type="text/javascript" charset="utf-8">

        CHARACTERS = [
          'Kaguyahime',
          'Dorothy',
          'Cinderella',
          'Alice',
          'SnowWhite',
          'Ibarahime',
          'Akazukin',
          'Gretel',
          'Mermaid',
          'Pinocchio',
          'NutCracker',
          'Nier',
        ]

        MY_FAVOURITES = [

        ]
            function createThumbnail(video_id) {
              var t = $("#thumbnail_template").clone()
              t.removeAttr("id");
              t.find("img").attr("src", "../media/" + video_id + ".jpg");
              t.find("img").attr("onclick", "displayVideo('" + video_id + ".mp4');");
              t.show();
              return t;
            }

            function displayThumbnails(tabcontainer, character_name){
              var container = tabcontainer.find(".row[name='thumbnails_container']");
              $.get("../media/character_list/" + character_name + ".txt", function(txt){
                var lines = txt.split("\n");
                for (var i = 0; i < lines.length; i++) {
                    if (lines[i]) {
                      var t = createThumbnail(lines[i]);
                      container.append(t);
                    }
                }
              });

            }

            function displayVideo(video_id){
              var container = $("#video_display");
              var t = $("#video_display_template").clone()
              t.removeAttr("id");
              t.find("source").attr("src", "../media/" + video_id);
              t.show();
              container.html(t);
            }


            function createIcons(){
              var container = $("#icon_container");
              for (var i = 0; i < CHARACTERS.length; i++) {
                var t = $("#icon_template").clone()
                t.removeAttr("id");
                t.attr("id", CHARACTERS[i] + "-icon");
                t.find("img").attr("src", "../media/charactor_icons/" + CHARACTERS[i] + ".jpg");
                t.find("img").attr("onclick", "openTab('" + CHARACTERS[i] + "');");
                t.find("img").attr("title", CHARACTERS[i]);
                t.show();
                container.append(t);
              }
            }

            function createTabContent(){
              var container = $("#tabcontent_container");
              // Display All
              var t = $("#tabcontent_template").clone()
              t.removeAttr("id");
              t.attr("id", "characters_all");
              t.show();
              container.append(t);
              for (var i = 0; i < CHARACTERS.length; i++){
                displayThumbnails(t, CHARACTERS[i]);
              }

              // My Favourites
              var t = $("#tabcontent_template").clone()
              t.removeAttr("id");
              t.attr("id", "my_favourites");
              t.show();
              container.append(t);
              displayThumbnails(t, "my_favourites");

              // By Characters
              for (var i = 0; i < CHARACTERS.length; i++) {
                var t = $("#tabcontent_template").clone()
                t.removeAttr("id");
                t.attr("id", CHARACTERS[i]);
                t.show();
                container.append(t);
                displayThumbnails(t, CHARACTERS[i]);
              }


            }

            function openTab(tabName) {
                var i, tabcontent, tablinks;
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                $("#" + tabName).css("display", "block");
            }


            $( document ).ready(function() {
                createIcons();
                createTabContent();
                openTab("characters_all");
                $.get("../media/character_list/my_favourites.txt", function(txt){
                  var lines = txt.split("\n");
                  var i = Math.floor(Math.random() * lines.length);
                  displayVideo(lines[i] + ".mp4");
                });
            })
        </script>
    </head>

    <body>

        <div>
            <h1 class="title" style="color: oldlace"> [kiking] Gallery of SINoAlice </h1>
            <h4>
              ... 蔡火誼的魔特 (長柄) 之旅
            </h4>
            <br>
            <h4 >
             Update (2020 Feb 19): [ 有夢想的養生館 (百大公會) > 蒙地卡羅的提靴人 (前四公會) ] 對啊還在玩, 改天會寫個手記吧?
             <br> <br>
             Update (2018 Dec 30): 第一次發現原來手遊嘅 Graphics 可以咁靚啊
             <br> <br>
            </h4>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-6" id="video_display" align="center"> </div>
          <div class="col-xs-12 col-md-5">
            <div class="row" style="margin-bottom: 5px;">
            <a style="margin-left: 20px;" target="_blank" href="https://www.deachsword.ga/db/sinoalice/guildeventranking.php"> 大競技場排名 </a>
            <a style="margin-left: 20px;" target="_blank" href="https://sinoalice.game-db.tw/weapons"> 武器 </a>
            </div>
            <div class="tab">
              <div class="row" id="icon_container" style="margin: 2px;">
              </div>
              <div style="cursor:pointer; float: left; margin-left: 20px; margin-bottom: 10px;" onclick="openTab('my_favourites');"> My Favourites </div>
              <div style="cursor:pointer; float: right; margin-right: 20px; margin-bottom: 10px;" onclick="openTab('characters_all');"> Display All </div>
            </div>

            <br>
            <div id="tabcontent_container">

            </div>

          </div>
        </div>

        <video controls loop autoplay muted id="video_display_template" style="display:none; max-width:500px;">
          <source src="" type="video/mp4">
        </video>

        <button class="col-xs-2 tablinks" id="icon_template" style="display:none">
            <img class="" src="" width="100%" style="cursor:pointer">
        </button>

        <div class="col-xs-3" id="thumbnail_template" style="display:none">
            <img class="" src="" width="100%" style="cursor:pointer">
        </div>

        <div class="tabcontent" id="tabcontent_template" style="display:none; overflow-y: auto; overflow-x: hidden; max-height: 550px;">
          <div class="row" name="thumbnails_container"> </div>
        </div>

    </body>
</html>
